# =============================================================================
# BUControl MCP Server - Environment Configuration
# =============================================================================

# Server Configuration
PORT=3100
HOST=0.0.0.0
NODE_ENV=production

# =============================================================================
# BUControl Backend WebSocket Connection
# =============================================================================
# Option 1: Direct Tailscale IP (if Render has Tailscale)
WEBSOCKET_HOST=100.71.254.15
WEBSOCKET_PORT=3004

# Option 2: Cloudflare Tunnel (recommended for production)
# WEBSOCKET_HOST=bucontrol-ws.yourdomain.com
# WEBSOCKET_PORT=443

# Option 3: ngrok (for testing)
# WEBSOCKET_HOST=your-subdomain.ngrok.io
# WEBSOCKET_PORT=443

CONTROLLER_ID=modular-controller-config

# =============================================================================
# Tailscale Configuration (for Render with Tailscale)
# =============================================================================
# Set these in Render dashboard as secrets
# TAILSCALE_AUTHKEY=tskey-auth-xxxxx
# TAILSCALE_HOSTNAME=bucontrol-mcp-render

# =============================================================================
# Security Configuration
# =============================================================================
# API Keys with optional tiers (key:tier format)
# Tiers: free (30/min), basic (100/min), premium (500/min), unlimited
# Generate keys: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
API_KEYS=your-api-key-1:premium,your-api-key-2:basic

# Require API key for all requests (default: true)
REQUIRE_API_KEY=true

# CORS Origins (comma-separated)
CORS_ORIGINS=https://claude.ai,https://api.anthropic.com

# =============================================================================
# OAuth 2.0 Configuration (alternative to API keys)
# =============================================================================
# Enable OAuth Bearer token authentication
OAUTH_ENABLED=false

# JWKS URI for public key retrieval (Auth0, Okta, Azure AD, etc.)
# Example for Auth0: https://your-tenant.auth0.com/.well-known/jwks.json
# Example for Okta: https://your-domain.okta.com/oauth2/default/v1/keys
OAUTH_JWKS_URI=

# Token issuer (must match 'iss' claim in JWT)
# Example for Auth0: https://your-tenant.auth0.com/
OAUTH_ISSUER=

# Expected audience (must match 'aud' claim in JWT)
# Example: https://api.bucontrol.io
OAUTH_AUDIENCE=

# JWT secret for HS256 tokens (alternative to JWKS for simple setups)
# Only used if OAUTH_JWKS_URI is not set
OAUTH_SECRET=

# Algorithms to accept (comma-separated)
# RS256 for JWKS, HS256 for secret-based
OAUTH_ALGORITHMS=RS256

# OAuth Client Credentials (for Claude connector)
# Format: clientId:clientSecret:tier (comma-separated for multiple)
# Generate: node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
OAUTH_CLIENTS=

# Token expiry (default: 24h)
OAUTH_TOKEN_EXPIRY=24h

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=100

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=info

# =============================================================================
# Timeouts
# =============================================================================
CONNECTION_TIMEOUT=20000
IDENTIFY_TIMEOUT=5000
COMMAND_TIMEOUT=10000
DISCOVERY_TIMEOUT=10000
RECONNECTION_DELAY_BASE=1000
RECONNECTION_DELAY_MAX=30000

# =============================================================================
# Features
# =============================================================================
ENABLE_METRICS=true
ENABLE_DEBUG=false
